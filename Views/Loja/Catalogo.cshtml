@model IEnumerable<SiteLoja.ViewModels.CategoriaViewModel>

@{
    ViewData["Title"] = "Catálogo de Categorias";
    Layout = "_Layout";
}

<div class="container py-5">

    <header class="mb-5 text-center">
        <h1 class="display-5 fw-bold">
            Explore
            <span class="text-secondary fw-normal d-block d-md-inline">Nossas Categorias</span>
        </h1>
        <p class="lead text-muted">Encontre o produto ideal na seção que mais combina com você.</p>
    </header>

    <div class="row row-cols-2 row-cols-md-3 row-cols-lg-4 g-4">

        @if (Model != null && Model.Any())
        {
            @* Itera sobre a lista de CategoriaViewModel para exibir os cards *@
            @foreach (var categoria in Model)
            {
                <div class="col">
                    <div class="category-card h-100 shadow-sm border-0" data-category="@categoria.Nome">

                        <a asp-controller="Loja"
                           asp-action="Categoria"
                           asp-route-q="@categoria.Nome"
                           class="d-flex flex-column h-100 category-link">

                            <div class="category-image-container flex-shrink-0">
                                <img src="@categoria.ImagemUrl"
                                     alt="@categoria.Nome"
                                     class="category-image"
                                     loading="lazy" />
                            </div>

                            <div class="category-body flex-grow-1">
                                <h3 class="category-name">@categoria.Nome</h3>
                                <span class="btn-view">Ver Categoria</span>
                            </div>
                        </a>
                    </div>
                </div>
            }
        }
        else
        {
            <div class="col-12 text-center">
                <p class="alert alert-info">Nenhuma categoria encontrada no momento.</p>
            </div>
        }
    </div>
</div>

<style>
    /* Definição de Variáveis CSS para Manutenção */
    :root {
        --card-radius: 12px;
        --primary-color: #000;
        --hover-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
        --default-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
    }

    /* ----------------------------------------------------------- */
    /* 1. Estilos do Card (Container da Categoria) */
    /* ----------------------------------------------------------- */
    .category-card {
        border-radius: var(--card-radius);
        overflow: hidden;
        box-shadow: var(--default-shadow);
        transition: box-shadow 0.3s ease;
        cursor: pointer;
    }

        .category-card:hover {
            box-shadow: var(--hover-shadow);
            transform: translateY(-2px); /* Efeito sutil de elevação */
        }

    .category-link {
        text-decoration: none;
        color: var(--primary-color);
    }

    /* ----------------------------------------------------------- */
    /* 2. Estilos da Imagem */
    /* ----------------------------------------------------------- */
    .category-image-container {
        height: 200px; /* Altura padrão para desktop */
        background-color: #ffffff; /* Fundo branco para imagens com transparência */
        padding: 0px;
        overflow: hidden; /* Garante que o zoom não vaze */
    }

    .category-image {
        width: 100%;
        height: 100%;
        object-fit: cover; /* Mantém o produto inteiro visível */
        transition: transform 0.4s ease;
    }

    .category-card:hover .category-image {
        transform: scale(1.08); /* Efeito de zoom mais notável no hover */
    }

    /* ----------------------------------------------------------- */
    /* 3. Estilos do Corpo e Texto */
    /* ----------------------------------------------------------- */
    .category-body {
        padding: 15px 10px; /* Padding maior para melhor respiro */
        background: #fff;
        text-align: center;
        display: flex;
        flex-direction: column;
        justify-content: space-between; /* Empurra o botão para baixo e o nome para cima */
    }

    .category-name {
        font-weight: 700;
        margin-bottom: 10px;
        font-size: 1.25rem;
        text-transform: uppercase;
        letter-spacing: 0.8px;
        /* Limita a altura para que não quebre o layout */
        overflow: hidden;
        text-overflow: ellipsis;
        display: -webkit-box;
        -webkit-line-clamp: 2; /* Limita a 2 linhas, se necessário */
        -webkit-box-orient: vertical;
    }

    /* ----------------------------------------------------------- */
    /* 4. Estilos do Botão "Ver Categoria" */
    /* ----------------------------------------------------------- */
    .btn-view {
        background-color: transparent;
        color: var(--primary-color);
        border: 2px solid var(--primary-color); /* Borda mais grossa para mais impacto */
        padding: 8px 25px;
        border-radius: 4px; /* Borda levemente quadrada */
        display: inline-block;
        font-size: 0.85em;
        font-weight: 600;
        transition: all 0.3s;
        text-transform: uppercase;
        width: 100%; /* Botão Full Width */
    }

    .category-card:hover .btn-view {
        background-color: var(--primary-color);
        color: #fff;
        border-color: var(--primary-color);
    }

    /* ----------------------------------------------------------- */
    /* 5. Media Queries - Responsividade Refinada */
    /* ----------------------------------------------------------- */
    @@media (max-width: 991px) { /* Tablet e Mobile */
        .category-image-container {
            height: 180px;
            padding: 0px;
        }

        .category-name {
            font-size: 1.1rem;
            margin-bottom: 8px;
        }
        /* Ajuste do Título Principal */
        header .display-5 {
            font-size: 2rem !important;
        }
    }

    @@media (max-width: 575px) { /* Mobile */
        .category-image-container {
            height: 160px;
        }

        .btn-view {
            padding: 6px 15px;
            font-size: 0.8em;
        }
    }
</style>